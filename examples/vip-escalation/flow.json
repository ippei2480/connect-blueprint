{
  "Version": "2019-10-30",
  "StartAction": "d0000001-0000-0000-0000-000000000000",
  "Actions": [
    {
      "Identifier": "d0000001-0000-0000-0000-000000000000",
      "Type": "UpdateFlowLoggingBehavior",
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000001"
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000001",
      "Type": "MessageParticipant",
      "Parameters": {
        "Text": "お電話ありがとうございます。"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000002",
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000002",
      "Type": "InvokeLambdaFunction",
      "Parameters": {
        "LambdaFunctionARN": "<YOUR_LOOKUP_CUSTOMER_LAMBDA_ARN>",
        "InvocationTimeLimitSeconds": "8"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000003",
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000005", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000003",
      "Type": "Compare",
      "Parameters": {
        "ComparisonValue": "$.External.customerLevel"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000005",
        "Conditions": [
          {
            "NextAction": "d0000001-0000-0000-0000-000000000004",
            "Condition": {
              "Operator": "Equals",
              "Operands": ["vip"]
            }
          },
          {
            "NextAction": "d0000001-0000-0000-0000-000000000005",
            "Condition": {
              "Operator": "Equals",
              "Operands": ["normal"]
            }
          }
        ],
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000005", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000004",
      "Type": "MessageParticipant",
      "Parameters": {
        "Text": "いつもご利用ありがとうございます。優先対応いたします。担当者におつなぎしますので少々お待ちください。"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000008",
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000005",
      "Type": "GetParticipantInput",
      "Parameters": {
        "Text": "営業へのお問い合わせは1を、サポートへのお問い合わせは2を押してください。",
        "DTMFConfiguration": {
          "InputTimeLimitSeconds": "8",
          "InputTerminationSequence": "#",
          "InterdigitTimeLimitSeconds": "5"
        },
        "InputTimeLimitSeconds": "8"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000010",
        "Conditions": [
          {
            "NextAction": "d0000001-0000-0000-0000-000000000006",
            "Condition": {
              "Operator": "Equals",
              "Operands": ["1"]
            }
          },
          {
            "NextAction": "d0000001-0000-0000-0000-000000000007",
            "Condition": {
              "Operator": "Equals",
              "Operands": ["2"]
            }
          }
        ],
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "InputTimeLimitExceeded" },
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "NoMatchingCondition" },
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000006",
      "Type": "UpdateContactTargetQueue",
      "Parameters": {
        "QueueId": "<YOUR_SALES_QUEUE_ARN>"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000009",
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000007",
      "Type": "UpdateContactTargetQueue",
      "Parameters": {
        "QueueId": "<YOUR_SUPPORT_QUEUE_ARN>"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000009",
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000008",
      "Type": "UpdateContactTargetQueue",
      "Parameters": {
        "QueueId": "<YOUR_VIP_QUEUE_ARN>"
      },
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000009",
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000009",
      "Type": "TransferContactToQueue",
      "Parameters": {},
      "Transitions": {
        "NextAction": "d0000001-0000-0000-0000-000000000010",
        "Errors": [
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "QueueAtCapacity" },
          { "NextAction": "d0000001-0000-0000-0000-000000000010", "ErrorType": "NoMatchingError" }
        ]
      }
    },
    {
      "Identifier": "d0000001-0000-0000-0000-000000000010",
      "Type": "DisconnectParticipant",
      "Parameters": {},
      "Transitions": {}
    }
  ],
  "Metadata": {
    "ActionMetadata": {
      "d0000001-0000-0000-0000-000000000000": { "position": { "x": 50, "y": 300 } },
      "d0000001-0000-0000-0000-000000000001": { "position": { "x": 200, "y": 300 } },
      "d0000001-0000-0000-0000-000000000002": { "position": { "x": 500, "y": 300 } },
      "d0000001-0000-0000-0000-000000000003": { "position": { "x": 800, "y": 300 } },
      "d0000001-0000-0000-0000-000000000004": { "position": { "x": 1100, "y": 100 } },
      "d0000001-0000-0000-0000-000000000005": { "position": { "x": 1100, "y": 400 } },
      "d0000001-0000-0000-0000-000000000006": { "position": { "x": 1400, "y": 300 } },
      "d0000001-0000-0000-0000-000000000007": { "position": { "x": 1400, "y": 500 } },
      "d0000001-0000-0000-0000-000000000008": { "position": { "x": 1400, "y": 100 } },
      "d0000001-0000-0000-0000-000000000009": { "position": { "x": 1700, "y": 300 } },
      "d0000001-0000-0000-0000-000000000010": { "position": { "x": 2000, "y": 300 } }
    }
  }
}
